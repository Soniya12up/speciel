<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Nayanika ‚ù§Ô∏è</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400;1,600&family=Montserrat:wght@100;200;300;400&family=Playfair+Display:ital,wght@0,400;1,400&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- CORE --- */
        body { 
            margin: 0; overflow: hidden; background-color: #050203; 
            font-family: 'Montserrat', sans-serif; color: #fce7f3;
            cursor: auto; 
            user-select: none;
        }

        /* Decoration */
        .film-grain {
            position: fixed; inset: 0; pointer-events: none; z-index: 1; opacity: 0.04; 
            background-image: url("https://upload.wikimedia.org/wikipedia/commons/7/76/Noise.png");
            animation: grain 8s steps(10) infinite;
        }
        @keyframes grain { 0%, 100% { transform: translate(0, 0); } 10% { transform: translate(-5%, -10%); } 90% { transform: translate(-1%, 7%); } }

        #cursor-dot {
            width: 12px; height: 12px; background: #f472b6; border-radius: 50%;
            position: fixed; pointer-events: none; z-index: 9999;
            box-shadow: 0 0 15px #f472b6; mix-blend-mode: screen; transition: transform 0.1s;
        }

        /* Typography */
        h1, h2, h3 { font-family: 'Cormorant Garamond', serif; letter-spacing: -0.02em; }
        .handwritten { font-family: 'Dancing Script', cursive; }
        .tech-font { font-family: 'Share Tech Mono', monospace; }

        /* Layout */
        .glass-panel {
            width: 100%; height: 100vh; position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10;
        }
        .chapter-container {
            position: absolute; inset: 0; padding: 1.5rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; text-align: center; z-index: 10; pointer-events: none;
            transition: opacity 0.5s ease;
        }
        .chapter-active { opacity: 1; visibility: visible; z-index: 20; pointer-events: auto; }

        /* Buttons & Cards */
        .soul-btn {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 12px 30px; font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem; letter-spacing: 2px; text-transform: uppercase;
            border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
            margin-top: 25px; position: relative; overflow: hidden; z-index: 50;
        }
        .soul-btn:hover { background: rgba(219, 39, 119, 0.3); border-color: #f472b6; box-shadow: 0 0 20px rgba(219, 39, 119, 0.4); transform: translateY(-2px); }

        .tech-btn {
            font-family: 'Share Tech Mono', monospace; background: rgba(0, 255, 0, 0.1);
            border: 1px solid #0f0; color: #0f0; padding: 10px 20px; text-transform: uppercase;
            cursor: pointer; letter-spacing: 2px; transition: all 0.3s; margin-top: 15px; font-size: 0.9rem; pointer-events: auto;
        }
        .tech-btn:hover { background: #0f0; color: black; box-shadow: 0 0 15px #0f0; }

        .glass-card {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px); border-radius: 12px; padding: 20px;
        }

        /* --- INTERACTIVES --- */
        .smile-sensor { width: 120px; height: 120px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-size: 4rem; cursor: pointer; transition: all 0.5s; animation: pulse 2s infinite; pointer-events: auto; }
        .smile-sensor:hover { background: rgba(236, 72, 153, 0.2); border-color: #ec4899; transform: scale(1.1); }
        
        .heart-container { width: 140px; height: 140px; cursor: pointer; pointer-events: auto; }
        .heart-path { fill: #330510; stroke: #be123c; stroke-width: 2; transition: all 1s; }
        .healed .heart-path { fill: #be123c; stroke: #fff; filter: drop-shadow(0 0 20px #be123c); }
        .crack { stroke: #fff; stroke-width: 3; opacity: 0.8; transition: all 1s; }
        .healed .crack { opacity: 0; stroke-width: 0; }

        .hand { font-size: 5rem; position: absolute; user-select: none; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        #my-hand { bottom: 15%; right: 20%; opacity: 0.5; }
        #her-hand { top: 15%; left: 20%; cursor: grab; z-index: 50; pointer-events: auto; }
        
        #puzzle-container { width: 300px; height: 300px; position: relative; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); pointer-events: auto; }
        .puzzle-piece { position: absolute; background-image: url('New folder (3)/mylove1.jpg'); background-size: 300% 300%; cursor: pointer; border: 1px solid rgba(255,255,255,0.3); transition: border 0.3s; }
        
        .funny-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 100%; max-width: 450px; pointer-events: auto; }
        .funny-item { aspect-ratio: 1; overflow: hidden; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); cursor: pointer; transition: transform 0.3s; position: relative; }
        .funny-item:hover { transform: scale(1.05); border-color: #ec4899; z-index: 10; }
        .funny-item img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Cake */
        .cake-body { width: 200px; height: 120px; background: #fce7f3; border-radius: 10px 10px 0 0; position: relative; display: flex; align-items: center; justify-content: center; cursor: pointer; pointer-events: auto; }
        .candles { display: flex; gap: 20px; margin-bottom: -10px; align-items: flex-end; }
        .candle { width: 12px; height: 50px; background: #fff; position: relative; cursor: pointer; pointer-events: auto; }
        .flame { width: 14px; height: 24px; background: #fbbf24; border-radius: 50% 50% 20% 20%; position: absolute; top: -24px; left: -1px; animation: flicker 0.6s infinite alternate; box-shadow: 0 0 15px #f59e0b; }
        .flame.out { opacity: 0; transform: scale(0); transition: 0.5s; }
        @keyframes flicker { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0.8; transform: scale(1.1); } }

        /* Loader */
        #loader { position: fixed; inset: 0; background: #000; z-index: 200; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #be123c; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="film-grain"></div>
    <div id="cursor-dot"></div>
    <canvas id="bg-canvas" style="position: fixed; top:0; left:0; z-index:-1;"></canvas>

    <!-- Music (Starts when prank ends) -->
    <audio id="bg-music" loop preload="auto"><source src="songs1/love12.mp3" type="audio/mpeg"></audio>

    <!-- 0. LOADER -->
    <div id="loader">
        <div class="text-pink-500 text-5xl animate-spin mb-4">‚ù§</div>
        <p class="text-pink-200 text-xs tracking-[0.4em] uppercase font-mono">Initializing Love...</p>
    </div>

    <!-- 0.5 PRANK STAGE (HACKER) -->
    <div id="prank-stage" class="fixed inset-0 z-[150] bg-black flex flex-col items-center justify-center tech-font hidden">
        <!-- Prank 1 -->
        <div id="prank-1" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center w-full">
            <h1 class="text-3xl text-green-500 mb-6 font-bold tracking-widest">SECURITY CHECK</h1>
            <div class="bg-gray-900 border border-green-800 p-8 rounded-lg w-full max-w-sm">
                <p class="text-green-400 text-left mb-2 text-xs">> IDENTIFY YOURSELF:</p>
                <input type="text" oninput="forceTyping(this)" class="w-full bg-black border border-green-500 text-green-500 p-3 outline-none mb-6 uppercase text-center tracking-widest pointer-events-auto" placeholder="TYPE NAME...">
                <button onclick="nextPrank(2)" class="tech-btn w-full">VERIFY BIOMETRICS</button>
            </div>
        </div>
        <!-- Prank 2 -->
        <div id="prank-2" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-green-500 mb-8">SCANNING DNA...</h2>
            <div class="w-32 h-32 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-8"></div>
            <div class="text-left w-64 space-y-2 font-mono text-sm">
                <p class="text-green-300">> Analyzing Cells...</p>
                <p id="age-text" class="text-green-300 opacity-0">> Result: <span class="text-red-500 font-bold">75 YEARS OLD</span></p>
                <p id="status-text" class="text-green-300 opacity-0">> Status: <span class="text-yellow-500">GRANDMA MODE</span></p>
            </div>
            <button id="btn-2" onclick="nextPrank(3)" class="tech-btn mt-8 opacity-0 pointer-events-none">ACCEPT REALITY</button>
        </div>
        <!-- Prank 3 -->
        <div id="prank-3" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-green-500 mb-8">ATTITUDE LEVELS</h2>
            <div class="w-64 h-8 bg-gray-800 rounded border border-green-500 overflow-hidden relative mb-4">
                <div id="sass-bar" class="h-full bg-red-600 w-0"></div>
            </div>
            <p id="sass-msg" class="text-red-500 text-xl font-bold opacity-0 animate-pulse">‚ö†Ô∏è CRITICAL SASS</p>
            <button id="btn-3" onclick="nextPrank(4)" class="tech-btn mt-8 opacity-0 pointer-events-none">I ADMIT IT</button>
        </div>
        <!-- Prank 4 -->
        <div id="prank-4" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-green-500 mb-8">HEIGHT VERIFICATION</h2>
            <div class="border-l-2 border-b-2 border-green-500 p-4 relative w-64 h-64 flex items-end justify-center mb-4">
                <div id="height-bar" class="w-20 bg-green-500/50 border border-green-400 mx-auto transition-all duration-1000" style="height: 0%"></div>
                <div class="absolute top-0 left-0 text-xs text-green-700">6ft</div>
                <div class="absolute top-1/2 left-0 text-xs text-green-700">3ft</div>
            </div>
            <p id="height-result" class="text-yellow-400 text-lg font-bold opacity-0"></p>
            <button id="btn-4" onclick="nextPrank(5)" class="tech-btn mt-6 opacity-0 pointer-events-none">CONTINUE (SHORTY)</button>
        </div>
        <!-- Prank 5 (Brain) -->
        <div id="prank-5" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-green-500 mb-6">SYSTEM UPDATE</h2>
            <p class="text-green-300 animate-pulse mb-4">> Downloading: <span class="text-white">BrainCells.exe</span></p>
            <div class="text-left w-72 p-4 bg-gray-900 border border-green-800 rounded text-xs font-mono space-y-2">
                <p id="dl-line-1" class="opacity-0">> Connecting...</p>
                <p id="dl-line-2" class="opacity-0 text-red-500">> ERROR: Connection Timed Out.</p>
                <p id="dl-line-3" class="opacity-0 text-red-500">> REASON: Storage Full (Too many cute photos).</p>
            </div>
            <button id="btn-5" onclick="nextPrank(6)" class="tech-btn mt-8 opacity-0 pointer-events-none">SKIP DOWNLOAD</button>
        </div>
        <!-- Prank 6 (IQ) -->
        <div id="prank-6" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-green-500 mb-8">INTELLIGENCE CHECK</h2>
            <h1 class="text-4xl text-white mb-8">2 + 2 = ?</h1>
            <div class="grid grid-cols-2 gap-4 w-64">
                <button onclick="failIQ()" class="bg-gray-800 border border-gray-600 text-white p-3 pointer-events-auto">4</button>
                <button onclick="passIQ()" class="bg-gray-800 border border-gray-600 text-white p-3 pointer-events-auto">5</button>
            </div>
            <p id="iq-msg" class="text-red-500 mt-6 h-6 text-sm"></p>
        </div>
        <!-- Prank 7 (Fav Child) -->
        <div id="prank-7" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center opacity-0 pointer-events-none transform scale-90">
            <h2 class="text-2xl text-red-500 mb-6">FINAL SECURITY QUESTION</h2>
            <p class="text-white mb-12">Who is the favorite child?</p>
            <div class="relative w-full h-64 flex justify-center items-center gap-8">
                <button id="btn-me" class="tech-btn bg-red-900/30 border-red-500 text-red-400 w-40" onmouseover="moveButton(this)">ME (NAYANIKA)</button>
                <button onclick="triggerGlitch()" class="tech-btn border-green-500 text-green-400 w-40">MY BROTHER</button>
            </div>
            <p class="text-gray-500 text-xs mt-8">Tip: Try clicking the other one.</p>
        </div>
    </div>

    <!-- MAIN STAGE (ROMANTIC) -->
    <div id="main-stage" class="glass-panel hidden opacity-0 transition-opacity duration-1000">
        
        <div class="absolute top-0 left-0 w-full h-1 bg-white/10 z-40">
            <div id="progress" class="h-full bg-pink-600 w-0 shadow-[0_0_10px_#db2777] transition-all duration-700"></div>
        </div>

        <!-- 1. Intro (With Main Photo) -->
        <div id="chap-1" class="chapter-container chapter-active">
            <!-- ADDED: Intro Photo Here -->
            <div class="w-40 h-40 md:w-56 md:h-56 rounded-full border-4 border-pink-400/50 p-1 mb-6 shadow-[0_0_50px_#f472b6] animate-pulse relative z-20">
                <img src="New folder (3)/mylove1.jpg" class="w-full h-full object-cover rounded-full">
            </div>
            <p class="text-pink-300 handwritten text-3xl mb-4 opacity-80 breathe-text">System Access Granted</p>
            <h1 class="text-5xl md:text-8xl text-transparent bg-clip-text bg-gradient-to-b from-white to-pink-300 mb-8 tracking-tight font-serif">Welcome, Sunu</h1>
            <button onclick="startJourney()" class="soul-btn">Enter My Heart</button>
        </div>

        <!-- 2. Smile -->
        <div id="chap-2" class="chapter-container">
            <h2 class="text-3xl text-white mb-8">First, a check...</h2>
            <div class="smile-sensor" onmouseover="activateSmile()" onclick="activateSmile()">üòä</div>
            <p id="smile-msg" class="text-pink-300 handwritten text-2xl mt-8 opacity-0">"When you smile, my whole world becomes lighter."</p>
            <button id="smile-btn" onclick="nextChapter()" class="soul-btn opacity-0 pointer-events-none mt-8">Enter</button>
        </div>

        <!-- 3. Timeline -->
        <div id="chap-3" class="chapter-container">
            <h2 class="text-4xl text-pink-100 mb-8 font-serif italic">How Stars Aligned</h2>
            <div class="relative h-[50vh] w-full max-w-md overflow-y-auto custom-scroll flex flex-col items-center pt-4 pb-20 pointer-events-auto">
                <div class="absolute left-1/2 transform -translate-x-1/2 w-px h-full bg-gradient-to-b from-transparent via-pink-500/50 to-transparent"></div>
                <div class="glass-card relative z-10 text-center p-6 m-4 w-64 transform transition hover:scale-105">
                    <p class="text-[10px] text-pink-400 uppercase tracking-widest mb-2">24 Jan 2008</p>
                    <p class="text-white font-serif text-lg">A Star was Born.</p>
                </div>
                <div class="glass-card relative z-10 text-center p-6 m-4 w-64 transform transition hover:scale-105">
                    <p class="text-[10px] text-pink-400 uppercase tracking-widest mb-2">24 May</p>
                    <p class="text-white font-serif text-lg italic">"The day you stayed."</p>
                </div>
                <div class="glass-card relative z-10 text-center p-6 m-4 w-64 transform transition hover:scale-105">
                    <p class="text-[10px] text-pink-400 uppercase tracking-widest mb-2">Today</p>
                    <p class="text-white font-serif text-lg">17 Years of Perfection.</p>
                </div>
            </div>
            <button onclick="nextChapter()" class="soul-btn">Heal Me</button>
        </div>

        <!-- 4. Heart -->
        <div id="chap-4" class="chapter-container">
            <h2 class="text-3xl text-white mb-6">You Healed Me</h2>
            <div class="heart-container" onclick="healHeart(this)">
                <svg viewBox="0 0 100 100" class="w-full h-full overflow-visible">
                    <path class="heart-path" d="M50 88.9L16.7 55.6C7.2 46.1 7.2 30.9 16.7 21.4s24.8-9.5 33.3 0L50 21.4l0 0 0 0L83.3 21.4c8.5-9.5 23.8-9.5 33.3 0s9.5 24.7 0 34.2L50 88.9z"/>
                    <path class="crack" d="M50 25 L40 40 L60 55 L45 70 L50 85" fill="none" />
                </svg>
            </div>
            <p id="heal-msg" class="text-pink-300 handwritten text-3xl mt-8 opacity-0">"You make everything in me whole."</p>
            <button id="heal-btn" onclick="nextChapter()" class="soul-btn opacity-0 pointer-events-none">Connect</button>
        </div>

        <!-- 5. Hand -->
        <div id="chap-5" class="chapter-container">
            <h2 class="text-3xl text-white mb-2">Connection</h2>
            <p class="text-xs text-gray-500 mb-8 uppercase tracking-widest">Drag your hand to mine</p>
            <div class="relative w-full h-[50vh] max-w-md bg-white/5 rounded-lg border border-white/10" id="drag-zone">
                <div id="my-hand" class="hand">ü´¥</div><div id="her-hand" class="hand">ü§ö</div>
            </div>
            <p id="hand-msg" class="text-white mt-6 opacity-0">I never want to let go.</p>
            <button id="hand-btn" onclick="nextChapter()" class="soul-btn opacity-0 pointer-events-none">Memories</button>
        </div>

        <!-- 6. Gallery -->
        <div id="chap-6" class="chapter-container">
            <h2 class="text-3xl text-pink-100 mb-4 font-serif">Moments I Replay</h2>
            <div id="gallery-stage" class="relative w-full h-[45vh] flex justify-center items-center perspective-[1000px]"></div>
            <p id="gallery-caption" class="px-4 text-center min-h-[60px] text-xl font-serif italic text-pink-200 mt-4"></p>
            <button id="gallery-btn" onclick="revealNextMemory()" class="soul-btn">Next Memory</button>
        </div>

        <!-- 7. Secrets -->
        <div id="chap-7" class="chapter-container">
            <h2 class="text-4xl text-white mb-8 font-serif">Secrets</h2>
            <div class="grid grid-cols-2 gap-4 w-full max-w-lg pointer-events-auto">
                <div class="glass-card p-6 cursor-pointer group relative overflow-hidden" onclick="this.querySelector('.cover').style.opacity=0">
                    <div class="cover absolute inset-0 bg-pink-900/80 flex items-center justify-center transition duration-500"><span class="text-2xl">üîí</span></div>
                    <p class="text-pink-200 font-serif italic text-center">"I love how you get jealous."</p>
                </div>
                <div class="glass-card p-6 cursor-pointer group relative overflow-hidden" onclick="this.querySelector('.cover').style.opacity=0">
                    <div class="cover absolute inset-0 bg-pink-900/80 flex items-center justify-center transition duration-500"><span class="text-2xl">üîí</span></div>
                    <p class="text-pink-200 font-serif italic text-center">"Your voice heals me."</p>
                </div>
            </div>
            <button onclick="nextChapter()" class="soul-btn mt-8">Watch This</button>
        </div>

        <!-- 8. Video -->
        <div id="chap-8" class="chapter-container">
            <h2 class="text-3xl text-white mb-6">A Memory of Us</h2>
            <div class="relative w-full max-w-2xl aspect-video bg-black rounded-lg border border-white/20 overflow-hidden pointer-events-auto shadow-2xl">
                <video id="memory-video" class="w-full h-full object-contain" controls>
                    <source src="New folder (3)/video.mp4" type="video/mp4">
                </video>
            </div>
            <button onclick="stopVideoAndNext()" class="soul-btn mt-8">Continue</button>
        </div>

        <!-- 9. Funny Photos -->
        <div id="chap-9" class="chapter-container">
            <h2 class="text-3xl text-pink-200 mb-2 font-serif">The Giggle Gallery</h2>
            <p class="text-xs text-gray-500 mb-8 uppercase tracking-widest">Click to reveal</p>
            <div class="funny-grid pointer-events-auto" id="funny-grid-container"></div>
            <button onclick="nextChapter()" class="soul-btn mt-8">Next</button>
        </div>

        <!-- 10. Laughter Check -->
        <div id="chap-10" class="chapter-container">
            <h1 class="text-4xl md:text-6xl handwritten text-pink-400 mb-12">Did you laugh? üòÇ</h1>
            <div class="flex gap-10 pointer-events-auto">
                <button onclick="nextChapter()" class="soul-btn mt-0 bg-green-900/40 border-green-500">YES</button>
                <button id="laugh-no-btn" onmouseover="moveLaughNoBtn()" class="soul-btn mt-0 bg-red-900/40 border-red-500">NO</button>
            </div>
        </div>

        <!-- 11. Puzzle -->
        <div id="chap-11" class="chapter-container">
            <h2 class="text-2xl text-white mb-4">Piece by Piece...</h2>
            <div id="puzzle-container" class="pointer-events-auto"></div>
            <button id="game-next-btn" onclick="nextChapter()" class="soul-btn opacity-0 pointer-events-none mt-6">Completed!</button>
        </div>

        <!-- 12. Reasons -->
        <div id="chap-12" class="chapter-container">
            <div class="h-[40vh] w-full flex flex-col items-center justify-center text-center space-y-6">
                <p class="text-xl text-white/60 font-light">Your Kindness</p>
                <p class="text-3xl text-pink-300 font-serif italic">Your Laugh</p>
                <p class="text-xl text-white/60 font-light">The way you look at me</p>
                <p class="text-3xl text-pink-300 font-serif italic">Just being You</p>
            </div>
            <button onclick="nextChapter()" class="soul-btn">Question?</button>
        </div>

        <!-- 13. Love Check -->
        <div id="chap-13" class="chapter-container">
            <h2 class="text-3xl text-white mb-8">One Last Question...</h2>
            <h1 class="text-5xl md:text-7xl handwritten text-pink-400 mb-12">Do you love me?</h1>
            <div class="flex gap-8 pointer-events-auto relative">
                <button onclick="handleLoveYes()" class="soul-btn mt-0 bg-green-900/50 hover:bg-green-700">YES</button>
                <button id="love-no-btn" onmouseenter="handleLoveNo()" class="soul-btn mt-0 bg-red-900/50 hover:bg-red-700">NO</button>
            </div>
            <p id="plea-msg" class="text-rose-400 font-mono mt-8 opacity-0 text-lg transition-opacity duration-300"></p>
        </div>

        <!-- 14. Letter -->
        <div id="chap-14" class="chapter-container">
            <div id="letter-closed" class="flex flex-col items-center cursor-pointer group pointer-events-auto" onclick="openLetter()">
                <div class="w-72 h-48 bg-[#9d174d] rounded-lg shadow-2xl flex items-center justify-center relative border-t-2 border-white/10 transition group-hover:scale-105">
                    <div class="absolute -top-10 text-white font-serif italic text-2xl">For Nayanika</div>
                    <span class="text-4xl">üíå</span>
                </div>
                <p class="text-[10px] text-white/50 mt-6 uppercase tracking-[0.3em] animate-pulse">Touch to Open</p>
            </div>
            <div id="letter-content" class="hidden bg-[#fff1f2] text-[#831843] w-[90%] max-w-lg max-h-[60vh] p-8 rounded text-left overflow-y-auto pointer-events-auto custom-scroll shadow-2xl">
                <p class="text-xl font-serif italic leading-relaxed">
                    My Dearest Nayanika, <br><br>
                    "Nayanika" isn't just a name. To me, it means <b>Home</b>. <br><br>
                    Thank you for the 24th of May. Thank you for choosing me. Even when I am difficult, you are patient. <br><br>
                    I love you more than words can say.<br><br>
                    Forever yours,<br>
                    <b>(Your Name)</b>
                </p>
                <div class="w-full flex justify-center mt-8">
                    <button onclick="nextChapter()" class="soul-btn text-black border-pink-900 hover:text-white">My Promises</button>
                </div>
            </div>
        </div>

        <!-- 15. Promises (ALL 18) -->
        <div id="chap-15" class="chapter-container">
            <h2 class="text-3xl text-pink-100 mb-6 font-serif italic">My Promises to You</h2>
            <div class="relative w-full max-w-sm aspect-[4/5] bg-black/20 rounded-xl border border-white/10 overflow-hidden shadow-2xl">
                <img id="promise-img" src="" class="absolute inset-0 w-full h-full object-cover opacity-80 transition-all duration-1000">
                <div class="absolute bottom-0 p-8 text-center w-full z-10 bg-gradient-to-t from-black to-transparent">
                    <p id="promise-text" class="text-white text-xl font-serif italic mb-3"></p>
                    <p id="promise-sub" class="text-pink-200/80 text-xs font-sans tracking-wide"></p>
                </div>
            </div>
            <p id="promise-counter" class="text-[10px] text-white/30 mt-6 tracking-[0.3em]">1 / 18</p>
            <button id="btn-promise-next" onclick="nextPromise()" class="soul-btn mt-2">Next Promise</button>
        </div>

        <!-- 16. Surprise Box -->
        <div id="chap-16" class="chapter-container">
            <h2 class="text-4xl text-white mb-6 font-serif">A Little Surprise</h2>
            <div id="surprise-box" class="w-48 h-48 bg-pink-900/30 border border-pink-500/50 rounded-lg flex items-center justify-center cursor-pointer animate-bounce pointer-events-auto shadow-[0_0_30px_#ec4899]" onclick="openSurprise()">
                <span class="text-6xl">üéÅ</span>
            </div>
            <div id="surprise-content" class="hidden flex-col items-center max-w-md text-center bg-black/80 p-6 rounded-xl border border-pink-500/30 backdrop-blur-xl">
                <img src="New folder (3)/surprise_box.jpg" class="w-full h-48 object-cover rounded-lg mb-4">
                <p class="text-pink-200 font-serif italic text-lg">"Just like this box, my heart is full of surprises for you."</p>
                <button onclick="nextChapter()" class="soul-btn mt-4">Future</button>
            </div>
        </div>

        <!-- 17. Future Vow -->
        <div id="chap-17" class="chapter-container">
            <h1 class="text-5xl md:text-7xl text-white mb-8 font-serif leading-tight">"A Future With You."</h1>
            <p class="text-pink-200/80 text-lg font-light">In every lifetime, I will find you.</p>
            <button onclick="nextChapter()" class="soul-btn mt-12">Make a Wish</button>
        </div>

        <!-- 18. Cake -->
        <div id="chap-18" class="chapter-container">
            <h2 class="text-4xl text-white mb-2 handwritten">Happy 17th Birthday</h2>
            <p id="cake-instruction" class="text-[10px] tracking-[0.3em] text-pink-400 uppercase mb-12 animate-pulse">Blow the candles</p>
            <div id="cake-section" class="flex flex-col items-center relative scale-125">
                <div class="candles">
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                </div>
                <div class="cake-body" onclick="cutCake()">
                    <div class="absolute w-full h-8 bg-pink-400 top-0 rounded-t-lg"></div>
                    <span class="text-pink-900/10 text-4xl font-bold select-none z-10">üéÇ</span>
                </div>
            </div>
        </div>

        <!-- 19. Finale -->
        <div id="chap-19" class="chapter-container">
            <div class="relative group cursor-pointer perspective-[1000px] mb-8">
                <img src="New folder (3)/surprise.jpg" id="final-img" class="relative w-72 md:w-96 rounded-lg border border-white/10 shadow-2xl transform scale-90 opacity-0">
            </div>
            <h1 id="typewriter" class="text-2xl md:text-4xl text-pink-100 font-serif italic text-center leading-relaxed h-16"></h1>
        </div>

    </div>

    <!-- MODALS -->
    
    <!-- Funny Photo Modal -->
    <div id="funny-modal" class="fixed inset-0 bg-black/90 z-[90] hidden items-center justify-center p-4" onclick="closeFunnyModal()">
        <div class="bg-white p-4 rotate-2 shadow-2xl max-w-sm pointer-events-auto transition transform scale-0" id="funny-card" onclick="event.stopPropagation()">
            <img id="funny-modal-img" src="" class="w-full h-64 object-cover mb-2 bg-gray-200">
            <p id="funny-modal-text" class="text-black font-serif text-center text-xl"></p>
        </div>
    </div>

    <!-- Love Video Overlay -->
    <div id="love-video-overlay" class="fixed inset-0 z-[100] bg-black hidden flex-col items-center justify-center opacity-0 transition-opacity duration-1000">
        <video id="final-love-video" class="w-full h-full object-contain" controls>
            <source src="New folder (3)/answer.mp4" type="video/mp4">
        </video>
        <button onclick="closeLoveVideo()" class="absolute top-5 right-5 text-white text-5xl z-[101] pointer-events-auto hover:text-red-500">&times;</button>
    </div>

    <!-- Music Control -->
    <div onclick="toggleMusic()" class="fixed bottom-6 right-6 text-white/50 hover:text-white cursor-pointer z-[200] transition p-3 bg-black/40 rounded-full backdrop-blur-md border border-white/10 pointer-events-auto">
        <span id="music-status" class="text-xs uppercase tracking-widest">üîá Music</span>
    </div>

    <script>
        gsap.registerPlugin(TextPlugin, Draggable);

        // --- GLOBAL ---
        const audio = document.getElementById('bg-music');
        let musicPlaying = false;
        function toggleMusic() {
            const status = document.getElementById("music-status");
            if(musicPlaying) { audio.pause(); status.innerText = "üîá Music"; } 
            else { audio.play().then(() => { status.innerText = "üîä Playing"; }).catch(e => { alert("Touch screen to enable audio"); }); }
            musicPlaying = !musicPlaying;
        }

        // --- CURSOR ---
        const cursorDot = document.getElementById("cursor-dot");
        document.addEventListener("mousemove", (e) => {
            cursorDot.style.left = e.clientX + "px";
            cursorDot.style.top = e.clientY + "px";
        });

        // --- INIT ---
        window.onload = () => {
            gsap.to("#loader", { opacity: 0, duration: 1.5, delay: 1, onComplete: () => {
                document.getElementById("loader").style.display = "none";
                document.getElementById("prank-stage").classList.remove("hidden");
                document.getElementById("prank-stage").style.display = "flex";
                initParticles();
            }});
        };

        // --- PRANK LOGIC ---
        function forceTyping(el) {
            const intended = "DRAMA QUEEN";
            if (el.value.length > 0 && !intended.startsWith(el.value)) {
                el.value = intended.substring(0, Math.min(el.value.length, intended.length));
            }
        }
        function moveButton(btn) {
            const maxX = window.innerWidth - 150; const maxY = window.innerHeight - 150;
            gsap.to(btn, { left: Math.random() * maxX, top: Math.random() * maxY, position: 'fixed', duration: 0.2 });
        }
        function nextPrank(num) {
            const curr = document.getElementById(`prank-${num-1}`); 
            const next = document.getElementById(`prank-${num}`);
            gsap.to(curr, { opacity: 0, scale: 0.9, duration: 0.5, onComplete: () => {
                curr.style.display = "none";
                if(next) {
                    next.style.display = "flex";
                    gsap.to(next, { opacity: 1, scale: 1, pointerEvents: "auto", duration: 0.5 });
                    if(num === 2) runAgeScan();
                    if(num === 3) runSassScan();
                    if(num === 4) runHeightScan();
                    if(num === 5) runBrainDownload();
                    if(num === 6) { /* IQ Logic inside HTML */ }
                }
            }});
        }
        function failIQ() { document.getElementById("iq-msg").innerText="INCORRECT"; }
        function passIQ() { document.getElementById("iq-msg").innerText="CORRECT. PROCEEDING..."; document.getElementById("iq-msg").style.color="#4ade80"; setTimeout(()=>nextPrank(7), 1000); }
        function runAgeScan() { gsap.to("#age-text", {opacity:1, duration:1, delay:1}); gsap.to("#status-text", {opacity:1, duration:1, delay:2}); gsap.to("#btn-2", {opacity:1, pointerEvents:"auto", duration:1, delay:3}); }
        function runSassScan() { gsap.to("#sass-bar", {width: "100%", duration: 2, ease: "power1.in"}); setTimeout(() => { gsap.to("#sass-msg", {opacity: 1, scale: 1.1, duration: 0.5, yoyo: true, repeat: 3}); gsap.to("#btn-3", {opacity: 1, pointerEvents: "auto", duration: 1, delay: 1}); }, 2100); }
        function runHeightScan() { gsap.to("#height-bar", {height: "30%", duration: 2}); setTimeout(() => { document.getElementById("height-result").innerText = "DETECTED: SMOL BEAN ü•î"; gsap.to("#height-result", {opacity: 1, duration: 0.5}); gsap.to("#btn-4", {opacity: 1, pointerEvents: "auto", duration: 1, delay: 0.5}); }, 2200); }
        function runBrainDownload() { gsap.to("#dl-line-1", {opacity: 1}); gsap.to("#dl-line-2", {opacity: 1, delay: 1.5}); gsap.to("#dl-line-3", {opacity: 1, delay: 2.5}); gsap.to("#btn-5", {opacity: 1, pointerEvents: "auto", delay: 3}); }
        
        function triggerGlitch() {
            gsap.to("#prank-stage", {opacity: 0, duration: 1, onComplete: () => {
                document.getElementById("prank-stage").style.display = "none";
                document.getElementById("main-stage").classList.remove("hidden");
                const intro = document.getElementById("chap-1");
                intro.style.visibility = "visible"; intro.style.opacity = "1";
                gsap.to("#main-stage", { opacity: 1, duration: 2 });
                
                // MUSIC STARTS HERE (PRANK ENDS -> INTRO STARTS)
                audio.volume = 0.5; 
                audio.play().then(() => {
                    document.getElementById("music-status").innerText = "üîä Playing";
                    musicPlaying = true;
                }).catch(e => { console.log("Audio block: " + e); });
            }});
        }

        // --- MAIN STORY ---
        let currentChap = 1; 
        const totalChap = 19;
        let isAnimating = false; // Prevent double clicks
        
        function startJourney() {
            nextChapter(); // Go to Smile (Chap 2)
        }

        function nextChapter() {
            if(isAnimating) return; isAnimating = true;
            const curr = document.getElementById(`chap-${currentChap}`);
            const next = document.getElementById(`chap-${currentChap+1}`);
            
            if(curr) { curr.style.pointerEvents = "none"; gsap.to(curr, { opacity: 0, y: -20, duration: 0.8 }); }
            gsap.to("#progress", { width: `${(currentChap/totalChap)*100}%`, duration: 1 });

            if(next) {
                currentChap++;
                setTimeout(() => {
                    curr.classList.remove("chapter-active");
                    next.classList.add("chapter-active");
                    gsap.fromTo(next, { opacity: 0, y: 30, filter: "blur(10px)" }, { opacity: 1, y: 0, filter: "blur(0px)", duration: 1, onComplete: () => { isAnimating = false; } });
                    initChapter(currentChap);
                }, 800);
            } else { isAnimating = false; }
        }

        function initChapter(id) {
            // General Button Anim
            gsap.fromTo(`#chap-${id} .soul-btn`, { opacity: 0, scale: 0.9 }, { opacity: 1, scale: 1, duration: 1, delay: 1, ease: "back.out" });
            
            // Specifics
            if(id === 5) initHandDrag();
            if(id === 6) revealNextMemory();
            if(id === 9) initFunnyGrid();
            if(id === 11) initPuzzle();
            if(id === 15) loadPromise(0);
            if(id === 19) revealFinale();
        }

        // --- INTERACTION LOGIC ---
        // Smile
        let smileActive = false;
        function activateSmile() { if(!smileActive) { smileActive = true; confetti({ particleCount: 50, spread: 70, origin: { y: 0.6 } }); gsap.to("#smile-msg", { opacity: 1, y: -10, duration: 1 }); gsap.to("#smile-btn", { opacity: 1, duration: 1, delay: 1, onStart:()=>{document.getElementById("smile-btn").style.pointerEvents="auto"} }); } }
        // Heart
        function healHeart(el) { if(!el.classList.contains("healed")) { el.classList.add("healed"); confetti({ particleCount: 30, spread: 40, colors: ['#e11d48'] }); gsap.to("#heal-msg", { opacity: 1, y: -10, duration: 1.5 }); gsap.to("#heal-btn", { opacity: 1, duration: 1, delay: 1.5, onStart:()=>{document.getElementById("heal-btn").style.pointerEvents="auto"} }); } }
        // Hand
        function initHandDrag() { Draggable.create("#her-hand", { type: "x,y", bounds: "#drag-zone", onDragEnd: function() { const m=document.getElementById("my-hand").getBoundingClientRect(); const h=this.target.getBoundingClientRect(); if(Math.abs(m.left-h.left)<100 && Math.abs(m.top-h.top)<100) { gsap.to(this.target, {x:m.left-h.left, y:m.top-h.top, duration:0.5}); gsap.to("#hand-msg", {opacity:1, duration:1}); gsap.to("#hand-btn", {opacity:1, duration:1, delay:1, onStart:()=>{document.getElementById("hand-btn").style.pointerEvents="auto"}}); confetti({particleCount:50, spread:60}); this.disable(); } }}); }
        
        // Gallery
        const memories = [
            { src: "New folder (3)/mylove1.jpg", text: "Your smile makes my winter warm." },
            { src: "New folder (3)/mylove2.jpg", text: "Eyes that hold my entire universe." },
            { src: "New folder (3)/sur1.jpg", text: "Even in chaos, you are my calm." },
            { src: "New folder (3)/sur2.jpg", text: "Us. My favorite story." }
        ];
        let mIdx = 0;
        function revealNextMemory() {
            if (mIdx >= memories.length) { nextChapter(); return; }
            const stage = document.getElementById("gallery-stage"); const data = memories[mIdx];
            const div = document.createElement("div"); 
            div.className = "absolute bg-white p-2 shadow-2xl w-64 transform transition duration-500";
            div.innerHTML = `<img src="${data.src}" class="w-full h-80 object-cover" onerror="this.src='https://source.unsplash.com/random/400x500/?couple&sig=${mIdx}'">`;
            stage.appendChild(div);
            gsap.fromTo(div, { scale: 0, rotation: Math.random()*20-10 }, { scale: 1, rotation: Math.random()*6-3, duration: 1, ease: "back.out" });
            document.getElementById("gallery-caption").innerText = `"${data.text}"`;
            mIdx++;
        }

        // Funny
        const funnyImgs = [
            {src: "New folder (3)/funny1.jpg", text: "Chaos Mode"}, {src: "New folder (3)/funny2.jpg", text: "Eating?"},
            {src: "New folder (3)/funny3.jpg", text: "Sleepy Head"}, {src: "New folder (3)/funny4.jpg", text: "Drama Queen"}
        ];
        function initFunnyGrid() {
            const c = document.getElementById("funny-grid-container"); c.innerHTML = "";
            funnyImgs.forEach((item) => {
                const d = document.createElement("div"); d.className = "funny-item";
                d.innerHTML = `<img src="${item.src}" onerror="this.src='https://source.unsplash.com/random/200x200/?funny&sig=${Math.random()}'">`;
                d.onclick = () => { 
                    const m = document.getElementById("funny-modal"); m.classList.remove("hidden"); m.classList.add("flex");
                    document.getElementById("funny-modal-img").src = item.src; document.getElementById("funny-modal-text").innerText = item.text;
                    gsap.to("#funny-card", {scale: 1, duration: 0.3, ease: "back.out"});
                };
                c.appendChild(d);
            });
        }
        function closeFunnyModal() { document.getElementById("funny-modal").classList.add("hidden"); document.getElementById("funny-modal").classList.remove("flex"); gsap.set("#funny-card", {scale: 0}); }
        function moveLaughNoBtn() { gsap.to("#laugh-no-btn", { x: (Math.random()-0.5)*300, y: (Math.random()-0.5)*200, duration: 0.2 }); }

        // Puzzle
        function initPuzzle() {
            const c=document.getElementById('puzzle-container'); c.innerHTML=''; let count=0;
            for(let i=0; i<9; i++) {
                const p=document.createElement('div'); p.className='puzzle-piece';
                p.style.width='33.3%'; p.style.height='33.3%';
                p.style.left=(i%3)*33.3+'%'; p.style.top=Math.floor(i/3)*33.3+'%';
                p.style.backgroundPosition = `${(i % 3) * 50}% ${Math.floor(i / 3) * 50}%`;
                gsap.set(p, {x:(Math.random()-0.5)*200, y:(Math.random()-0.5)*200, opacity:0});
                gsap.to(p, {opacity:1, duration:0.5, delay:Math.random()});
                p.onclick=()=>{
                    gsap.to(p, {x:0, y:0, opacity:1, duration:0.5, border:"none"}); count++;
                    if(count===9){ document.getElementById('game-next-btn').style.pointerEvents="auto"; gsap.to("#game-next-btn", {opacity:1}); confetti(); }
                };
                c.appendChild(p);
            }
        }

        // Video
        function stopVideoAndNext() { 
            const v = document.getElementById('memory-video'); v.pause(); 
            gsap.to(audio, {volume:0.5, duration:1});
            nextChapter(); 
        }
        document.getElementById('memory-video').onplay = () => gsap.to(audio, {volume:0, duration:0.5});

        // Love Check
        function handleLoveNo() { 
            document.getElementById("plea-msg").innerText = "Please click Yes ü•∫"; document.getElementById("plea-msg").style.opacity = 1; 
            gsap.to("#love-no-btn", {x: 10, yoyo: true, repeat: 5, duration: 0.05});
        }
        function handleLoveYes() {
            gsap.to(audio, {volume: 0, duration: 1});
            const ol = document.getElementById("love-video-overlay"); ol.classList.remove("hidden"); ol.classList.add("flex");
            gsap.to(ol, {opacity: 1, duration: 1});
            document.getElementById("final-love-video").play();
        }
        function closeLoveVideo() {
            const ol = document.getElementById("love-video-overlay");
            document.getElementById("final-love-video").pause();
            gsap.to(ol, {opacity: 0, duration: 1, onComplete:()=>{ol.classList.add("hidden"); gsap.to(audio, {volume:0.5, duration:1}); nextChapter();}});
        }

        // Letter
        function openLetter() {
            gsap.to("#letter-closed", { scale: 1.5, opacity: 0, duration: 0.8, onComplete: () => {
                document.getElementById("letter-closed").style.display = "none";
                document.getElementById("letter-content").classList.remove("hidden");
                gsap.fromTo("#letter-content", { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 1 });
            }});
        }

        // 18 PROMISES
        const promises = [
            { text: "I promise to stay.", sub: "Through storms and silence.", img: "New folder (3)/promise1.jpg" },
            { text: "I promise to listen.", sub: "Even to what you don't say.", img: "New folder (3)/promise2.jpg" },
            { text: "I promise to love you daily.", sub: "Not just on good days.", img: "New folder (3)/promise3.jpg" },
            { text: "I promise to be your home.", sub: "Your safe place.", img: "New folder (3)/promise4.jpg" },
            { text: "I promise to be patient.", sub: "When things get tough.", img: "New folder (3)/promise5.jpg" },
            { text: "I promise to support your dreams.", sub: "Your wins are my wins.", img: "New folder (3)/promise6.jpg" },
            { text: "I promise to be honest.", sub: "Always.", img: "New folder (3)/promise7.jpg" },
            { text: "I promise to protect your heart.", sub: "Like it's my own.", img: "New folder (3)/promise8.jpg" },
            { text: "I promise to adventure with you.", sub: "Life is a journey.", img: "New folder (3)/promise9.jpg" },
            { text: "I promise to grow with you.", sub: "Side by side.", img: "New folder (3)/promise10.jpg" },
            { text: "I promise to respect you.", sub: "In every way.", img: "New folder (3)/promise11.jpg" },
            { text: "I promise to comfort you.", sub: "When tears fall.", img: "New folder (3)/promise12.jpg" },
            { text: "I promise to make you laugh.", sub: "Every single day.", img: "New folder (3)/promise13.jpg" },
            { text: "I promise to be loyal.", sub: "You are my only one.", img: "New folder (3)/promise14.jpg" },
            { text: "I promise to be your best friend.", sub: "Forever.", img: "New folder (3)/promise15.jpg" },
            { text: "I promise to forgive.", sub: "We are only human.", img: "New folder (3)/promise16.jpg" },
            { text: "I promise to prioritize you.", sub: "You come first.", img: "New folder (3)/promise17.jpg" },
            { text: "I promise to love you forever.", sub: "To infinity.", img: "New folder (3)/promise18.jpg" }
        ];

        let pIdx = 0;
        function loadPromise(idx) {
            const img = document.getElementById('promise-img');
            document.getElementById('promise-text').innerText = promises[idx].text;
            document.getElementById('promise-sub').innerText = promises[idx].sub;
            document.getElementById('promise-counter').innerText = `${idx + 1} / ${promises.length}`;
            img.src = promises[idx].img;
            // Fallback for images
            img.onerror = function() { this.src = 'https://source.unsplash.com/random/400x500/?love&sig=' + idx; };
            gsap.fromTo(img, { scale: 1.1, opacity: 0 }, { scale: 1, opacity: 0.8, duration: 1 });
        }
        function nextPromise() {
            if (pIdx < promises.length - 1) { pIdx++; loadPromise(pIdx); }
            else { const b=document.getElementById("btn-promise-next"); b.innerText="Open Surprise"; b.onclick=nextChapter; }
        }

        // Surprise
        function openSurprise() {
            gsap.to("#surprise-box", { scale: 1.5, opacity: 0, duration: 0.5, onComplete: () => {
                document.getElementById("surprise-box").style.display = "none";
                const c = document.getElementById("surprise-content");
                c.classList.remove("hidden"); c.classList.add("flex");
                gsap.fromTo(c, { scale: 0.5, opacity: 0 }, { scale: 1, opacity: 1, duration: 1, ease: "elastic.out" });
                confetti({ particleCount: 50, spread: 70 });
            }});
        }

        // Cake
        let candlesOut = 0;
        function blowCandle(el) {
            const flame = el.querySelector('.flame');
            if(flame && !flame.classList.contains('out')) {
                flame.classList.add('out'); candlesOut++;
                if(candlesOut === 3) {
                    document.getElementById("cake-instruction").innerText = "Make a wish & Cut the cake";
                    gsap.to(".cake-body", { scale: 1.05, yoyo: true, repeat: -1, duration: 0.5 });
                }
            }
        }
        function cutCake() { if(candlesOut < 3) return; confetti({particleCount:150, spread:100}); nextChapter(); }

        // Finale & MASSIVE FLOWER RAIN
        function revealFinale() {
            gsap.fromTo("#final-img", { scale: 0.8, opacity: 0, rotation: -5 }, { scale: 1, opacity: 1, rotation: 0, duration: 3, ease: "elastic.out" });
            gsap.to("#typewriter", { text: "Happy Birthday, Nayanika. You are my answered prayer. ‚ù§Ô∏è", duration: 5, delay: 1, ease: "none" });
            triggerFlowerShower();
        }

        function triggerFlowerShower() {
            var end = Date.now() + (8 * 1000); // 8 seconds
            var colors = ['#ff0000', '#ff69b4', '#ffc0cb', '#ffffff', '#e11d48'];

            (function frame() {
                confetti({ particleCount: 8, angle: 60, spread: 55, origin: { x: 0 }, colors: colors, shapes: ['circle', 'square'], scalar: 1.2, drift: 1 });
                confetti({ particleCount: 8, angle: 120, spread: 55, origin: { x: 1 }, colors: colors, shapes: ['circle', 'square'], scalar: 1.2, drift: -1 });

                if (Date.now() < end) { requestAnimationFrame(frame); }
            }());
        }

        // --- BACKGROUND ---
        function initParticles() {
            const canvas = document.getElementById('bg-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            const geometry = new THREE.BufferGeometry();
            const count = 300; const pos = new Float32Array(count*3);
            for(let i=0; i<count*3; i++) pos[i] = (Math.random()-0.5)*15;
            geometry.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const material = new THREE.PointsMaterial({ size: 0.03, color: 0xfbcfe8, transparent: true, opacity: 0.6 });
            const points = new THREE.Points(geometry, material);
            scene.add(points); camera.position.z = 5;
            function animate() { requestAnimationFrame(animate); points.rotation.y += 0.0005; renderer.render(scene, camera); }
            animate();
            window.addEventListener('resize', () => { camera.aspect=window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
        }
    </script>
</body>
</html>
