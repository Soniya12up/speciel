<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Nayanika ‚ù§Ô∏è</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Montserrat:wght@200;300;400&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- AESTHETIC CORE --- */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050203; /* Deep dark rose-black */
            font-family: 'Montserrat', sans-serif;
            color: #e5e5e5;
            -webkit-tap-highlight-color: transparent;
        }

        /* Film Grain */
        .film-grain {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("https://upload.wikimedia.org/wikipedia/commons/7/76/Noise.png");
            opacity: 0.07; pointer-events: none; z-index: 5;
            animation: grain 8s steps(10) infinite;
        }
        @keyframes grain { 0%, 100% { transform: translate(0, 0); } 10% { transform: translate(-5%, -10%); } 30% { transform: translate(3%, -15%); } 50% { transform: translate(12%, 9%); } 70% { transform: translate(9%, 4%); } 90% { transform: translate(-1%, 7%); } }

        /* Typography */
        h1, h2, h3 { font-family: 'Cormorant Garamond', serif; font-weight: 600; }
        .handwritten { font-family: 'Dancing Script', cursive; }
        
        /* Glass Panel Container */
        .glass-panel {
            background: rgba(15, 10, 12, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
            width: 100%; height: 100vh;
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Chapters Layout */
        .chapter-container {
            position: absolute; inset: 0; padding: 1.5rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; text-align: center;
            z-index: 10;
            transition: visibility 0.5s;
        }
        .chapter-active { opacity: 1; visibility: visible; z-index: 20; }

        /* Scrollable Text Area */
        .text-content-scroll {
            max-height: 50vh;
            overflow-y: auto;
            padding: 0 10px;
            width: 100%;
        }
        .text-content-scroll::-webkit-scrollbar { width: 4px; }
        .text-content-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

        /* Floating Photos */
        .memory-photo {
            box-shadow: 0 0 30px rgba(244, 114, 182, 0.4);
            border: 1px solid rgba(255,255,255,0.2);
            animation: float 8s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-10px) rotate(1deg); } }

        /* Text Styling */
        .emotional-text {
            font-size: 1rem; md:text-xl; line-height: 1.6; color: #d1d5db;
            max-width: 600px; margin: 0 auto;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
        .highlight { color: #fbcfe8; font-style: italic; text-shadow: 0 0 15px rgba(249, 168, 212, 0.4); }

        /* Button */
        .soul-btn {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.9);
            padding: 12px 30px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem; letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.5s ease;
            position: relative; overflow: hidden; cursor: pointer;
            margin-top: 20px;
            z-index: 50;
        }
        .soul-btn:hover { border-color: #f472b6; color: #fff; box-shadow: 0 0 20px rgba(244, 114, 182, 0.3); background: rgba(244, 114, 182, 0.1); }

        /* --- CAKE STYLES --- */
        .cake-section { display: flex; flex-col; items-center; justify-center; margin-top: 20px; }
        .cake-body {
            width: 180px; height: 100px; background: #fce7f3;
            border-radius: 10px 10px 0 0; position: relative;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
            display: flex; align-items: center; justify-content: center;
        }
        .icing { position: absolute; top: 0; left: 0; width: 100%; height: 35px; background: #f472b6; border-radius: 10px 10px 20px 20px; }
        .candles-container { display: flex; gap: 15px; margin-bottom: -5px; z-index: 10; }
        .candle {
            width: 10px; height: 40px; background: #fff; position: relative; cursor: pointer;
        }
        .flame {
            width: 12px; height: 20px; background: #fbbf24; border-radius: 50% 50% 20% 20%;
            position: absolute; top: -20px; left: -1px;
            animation: flicker 0.5s infinite alternate;
            box-shadow: 0 0 10px #f59e0b;
        }
        .flame.out { opacity: 0; transform: scale(0.5); transition: 0.5s; }
        @keyframes flicker { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.1); opacity: 0.8; } }

        /* Loading Screen */
        #loader { background: #000; position: fixed; inset: 0; z-index: 100; display: flex; align-items: center; justify-content: center; }
        .fade-text { animation: fadeInOut 2s infinite; }
        @keyframes fadeInOut { 0%,100% { opacity: 0.3; } 50% { opacity: 1; } }

    </style>
</head>
<body>

    <!-- Film Grain Overlay -->
    <div class="film-grain"></div>

    <!-- Audio -->
    <audio id="bg-music" loop preload="auto">
        <source src="songs1/love12.mp3" type="audio/mpeg">
    </audio>

    <!-- 3D Background -->
    <canvas id="bg-canvas" style="position: fixed; top:0; left:0; z-index:-2;"></canvas>

    <!-- Loader -->
    <div id="loader">
        <p class="text-white font-light tracking-[0.5em] text-xs fade-text uppercase">Loading Memories...</p>
    </div>

    <!-- Intro -->
    <div id="intro-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black transition-opacity duration-1000 hidden">
        <p class="text-pink-300 handwritten text-3xl mb-4 opacity-80">For my soulmate,</p>
        <h1 class="text-5xl md:text-7xl text-white mb-8 tracking-wide">Nayanika</h1>
        <p class="text-gray-500 text-xs uppercase tracking-widest mb-12 animate-pulse">Please wear headphones</p>
        <button onclick="startJourney()" class="soul-btn">
            Open My Heart
        </button>
    </div>

    <!-- Main Stage -->
    <div id="main-stage" class="glass-panel opacity-0 transition-opacity duration-1000 hidden">

        <!-- Progress -->
        <div class="absolute top-6 left-1/2 transform -translate-x-1/2 w-24 h-0.5 bg-white/10 rounded-full overflow-hidden z-30">
            <div id="progress" class="h-full bg-pink-500 w-0 transition-all duration-1000"></div>
        </div>

        <!-- CHAP 1: The Arrival -->
        <div id="chap-1" class="chapter-container chapter-active">
            <div class="w-40 h-40 md:w-52 md:h-52 mb-6 rounded-full p-1 border border-pink-500/20 memory-photo bg-pink-500/10">
                <img src="New folder (3)/mylove1.jpg" class="w-full h-full object-cover rounded-full transition duration-1000">
            </div>
            
            <h2 class="text-3xl md:text-5xl text-pink-100 mb-6 italic">The Day The World Changed</h2>
            
            <div class="text-content-scroll emotional-text space-y-4">
                <p>Before you, I didn't realize how loud the world was.</p>
                <p>Then you walked in, deeply and quietly, and suddenly...</p>
                <p class="highlight">Everything became a melody.</p>
            </div>
            <button onclick="nextChapter()" class="soul-btn">I want to tell you something</button>
        </div>

        <!-- CHAP 2: The Confession -->
        <div id="chap-2" class="chapter-container">
            <h2 class="text-3xl md:text-4xl text-white mb-6">The Truth I Hide</h2>
            <div class="flex flex-col items-center gap-6 max-w-4xl w-full">
                <div class="w-full h-48 md:w-64 md:h-64 relative memory-photo rounded-lg overflow-hidden border border-white/20">
                    <img src="New folder (3)/mylove2.jpg" class="w-full h-full object-cover opacity-100">
                </div>
                <div class="text-content-scroll emotional-text text-center space-y-4">
                    <p>Sometimes, I look at you when you aren't looking.</p>
                    <p>And I get this overwhelming fear‚Äî<span class="text-pink-300">what did I do to deserve an angel like you?</span></p>
                    <p>You heal parts of me that I didn't even tell you were broken.</p>
                    <p class="handwritten text-2xl text-pink-200 mt-2">"You are my safe place."</p>
                </div>
            </div>
            <button onclick="nextChapter()" class="soul-btn">Go Deeper</button>
        </div>

        <!-- CHAP 3: The Little Things (FIXED SECTION) -->
        <div id="chap-3" class="chapter-container">
            <h2 class="text-3xl text-pink-100 mb-6">Why It's You</h2>
            
            <div class="text-content-scroll w-full max-w-2xl flex flex-col items-center">
                
                <!-- Fixed Photo: Larger, Glowing, Centered, No Opacity -->
                <div class="relative w-32 h-32 md:w-44 md:h-44 mb-8 group shrink-0">
                    <div class="absolute inset-0 bg-pink-500/30 rounded-full blur-xl group-hover:blur-2xl transition duration-500"></div>
                    <img src="New folder (3)/mylove3.jpg" class="relative w-full h-full object-cover rounded-full border-2 border-pink-200/50 shadow-2xl z-10">
                </div>

                <!-- Text Grid -->
                <div class="grid grid-cols-1 gap-4 w-full">
                    <div class="bg-white/5 p-5 border border-white/10 rounded-lg hover:bg-white/10 transition">
                        <h3 class="text-xl text-pink-300 mb-1 handwritten">Your Kindness</h3>
                        <p class="text-sm text-gray-300 font-light leading-relaxed">The way you treat the world makes me want to be a better man. Your heart is pure gold.</p>
                    </div>
                    <div class="bg-white/5 p-5 border border-white/10 rounded-lg hover:bg-white/10 transition">
                        <h3 class="text-xl text-pink-300 mb-1 handwritten">Your Laugh</h3>
                        <p class="text-sm text-gray-300 font-light leading-relaxed">It is my favorite sound. I would spend my entire life just trying to make you smile.</p>
                    </div>
                </div>
            </div>

            <button onclick="nextChapter()" class="soul-btn mt-6">My Promise</button>
        </div>

        <!-- CHAP 4: The Promise -->
        <div id="chap-4" class="chapter-container">
            <div class="max-w-xl text-center px-4">
                <p class="text-xs tracking-widest text-gray-500 uppercase mb-4">A vow to Nayanika</p>
                <h1 class="text-3xl md:text-5xl text-white mb-6 leading-tight">"In Every Lifetime."</h1>
                <div class="text-content-scroll emotional-text mb-4">
                    <p>If we are born again, I will find you sooner.</p>
                    <p>I will love you longer.</p>
                    <p>I will choose you, over and over again, in every reality that exists.</p>
                </div>
                <div class="w-full h-px bg-gradient-to-r from-transparent via-pink-500 to-transparent my-6"></div>
                <p class="text-pink-200 italic font-serif">"You are not just my love. You are my soul's home."</p>
            </div>
            <button onclick="nextChapter()" class="soul-btn mt-4">Make a Wish</button>
        </div>

        <!-- CHAP 5: The Cake Ritual -->
        <div id="chap-5" class="chapter-container">
            <h2 class="text-3xl text-white mb-2 handwritten">Happy Birthday, Sunu</h2>
            <p id="cake-instruction" class="text-xs tracking-widest text-pink-400 uppercase mb-8 animate-pulse">Tap the candles to make a wish</p>
            
            <div id="cake-section" class="flex flex-col items-center relative">
                <!-- Candles -->
                <div class="candles-container">
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                    <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
                </div>
                <!-- Cake Body -->
                <div class="cake-body" onclick="cutCake()">
                    <div class="icing"></div>
                    <span class="text-pink-900/20 text-4xl font-bold select-none z-10">üéÇ</span>
                </div>
                <!-- Shadow -->
                <div class="w-48 h-2 bg-white/10 rounded-full mt-2 blur-sm"></div>
            </div>
        </div>

        <!-- CHAP 6: The Finale -->
        <div id="chap-6" class="chapter-container">
            <div class="relative group cursor-pointer perspective-1000 mb-6">
                <div class="absolute -inset-4 bg-pink-600/30 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition duration-1000"></div>
                <!-- SURPRISE IMAGE -->
                <img src="New folder (3)/surprise.jpg" id="final-img" class="relative w-64 md:w-80 rounded-lg border-2 border-white/20 shadow-2xl transform scale-95 opacity-0">
            </div>
            
            <div class="h-24 w-full flex items-center justify-center px-4">
                <h1 id="typewriter" class="text-xl md:text-3xl text-pink-200 font-serif italic text-center leading-relaxed"></h1>
            </div>
            
            <p class="text-gray-600 text-xs mt-8">I love you. Forever.</p>
        </div>

    </div>

    <!-- Music Control -->
    <div onclick="toggleMusic()" class="fixed bottom-6 right-6 text-white/50 hover:text-white cursor-pointer z-50 transition duration-300 p-2 bg-black/20 rounded-full backdrop-blur-sm border border-white/10">
        <span id="music-status">üîá Play Music</span>
    </div>

    <script>
        // --- INIT ---
        window.onload = () => {
            gsap.to("#loader", { opacity: 0, duration: 1.5, onComplete: () => {
                document.getElementById("loader").style.display = "none";
                document.getElementById("intro-screen").classList.remove("hidden");
                initParticles();
            }});
        };

        // --- AUDIO ---
        const audio = document.getElementById('bg-music');
        let musicPlaying = false;
        
        function toggleMusic() {
            const status = document.getElementById("music-status");
            if(musicPlaying) { 
                audio.pause(); 
                status.innerText = "üîá Play Music";
            } else { 
                audio.play().then(() => {
                    status.innerText = "üîä Pause";
                }).catch(e => {
                    alert("Please interact with the screen to play music.");
                });
            }
            musicPlaying = !musicPlaying;
        }

        // --- NAVIGATION ---
        let currentChap = 1;
        const totalChap = 6;
        let isNavigating = false;

        function startJourney() {
            gsap.to("#intro-screen", { opacity: 0, duration: 2, onComplete: () => {
                document.getElementById("intro-screen").style.display = "none";
                document.getElementById("main-stage").classList.remove("hidden");
                gsap.to("#main-stage", { opacity: 1, duration: 2 });
                
                audio.volume = 0.5;
                audio.play().then(() => {
                    musicPlaying = true;
                    document.getElementById("music-status").innerText = "üîä Pause";
                }).catch(() => {
                    console.log("Autoplay blocked");
                });
                
                animateElements(1);
            }});
        }

        function nextChapter() {
            if(isNavigating) return;
            isNavigating = true;

            const curr = document.getElementById(`chap-${currentChap}`);
            const next = document.getElementById(`chap-${currentChap+1}`);
            
            gsap.to("#progress", { width: `${(currentChap/5)*100}%`, duration: 1 });

            gsap.to(curr, { 
                opacity: 0, 
                y: -20, 
                duration: 0.8, 
                ease: "power2.in", 
                onComplete: () => {
                    curr.classList.remove("chapter-active");
                    next.classList.add("chapter-active");
                    
                    gsap.fromTo(next, 
                        { opacity: 0, y: 30 }, 
                        { opacity: 1, y: 0, duration: 1, ease: "power2.out", onComplete: () => { isNavigating = false; } }
                    );
                    
                    currentChap++;
                    animateElements(currentChap);
                }
            });
        }

        function animateElements(id) {
            gsap.fromTo(`#chap-${id} p, #chap-${id} h2, #chap-${id} h1`, 
                { opacity: 0, y: 15 },
                { opacity: 1, y: 0, duration: 1.5, stagger: 0.2, ease: "power3.out" }
            );
            gsap.fromTo(`#chap-${id} .soul-btn`, 
                { opacity: 0, scale: 0.9 }, 
                { opacity: 1, scale: 1, duration: 1, delay: 1.5 }
            );
        }

        // --- CAKE INTERACTION ---
        let candlesOut = 0;
        function blowCandle(el) {
            const flame = el.querySelector('.flame');
            if(!flame.classList.contains('out')) {
                flame.classList.add('out');
                candlesOut++;
                if(candlesOut === 3) {
                    const instr = document.getElementById("cake-instruction");
                    instr.innerText = "Now... tap the cake to cut it.";
                    instr.classList.remove("text-pink-400");
                    instr.classList.add("text-white");
                    gsap.to(".cake-body", { scale: 1.05, yoyo: true, repeat: -1, duration: 0.5 });
                }
            }
        }

        function cutCake() {
            if(candlesOut < 3) return;
            
            gsap.killTweensOf(".cake-body");

            gsap.to("#chap-5", { opacity: 0, scale: 0.9, duration: 1, onComplete: () => {
                document.getElementById("chap-5").classList.remove("chapter-active");
                document.getElementById("chap-6").classList.add("chapter-active");
                gsap.set("#chap-6", { opacity: 1, visibility: 'visible' });
                revealFinale();
            }});
        }

        function revealFinale() {
            rainPetals();
            
            gsap.fromTo("#final-img", 
                { scale: 0.8, opacity: 0 }, 
                { scale: 1, opacity: 1, duration: 2, ease: "power3.out" }
            );
            
            gsap.to("#typewriter", {
                text: "Happy Birthday, Nayanika. You are my answered prayer. ‚ù§Ô∏è",
                duration: 5,
                delay: 1,
                ease: "none"
            });
            
            if(musicPlaying) gsap.to(audio, { volume: 0.8, duration: 4 });
        }

        function rainPetals() {
            const end = Date.now() + 5000;
            const colors = ['#fbcfe8', '#f472b6', '#db2777'];
            
            (function frame() {
                confetti({
                    particleCount: 3,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: colors,
                    shapes: ['circle'], 
                    scalar: 1.2,
                    drift: 0.5
                });
                confetti({
                    particleCount: 3,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: colors,
                    shapes: ['circle'],
                    scalar: 1.2,
                    drift: -0.5
                });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }

        // --- 3D PARTICLES ---
        function initParticles() {
            const canvas = document.getElementById('bg-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            const geometry = new THREE.BufferGeometry();
            const count = 400;
            const pos = new Float32Array(count*3);
            for(let i=0; i<count*3; i++) pos[i] = (Math.random()-0.5)*15;
            geometry.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            
            const material = new THREE.PointsMaterial({ size: 0.02, color: 0xffafcc, transparent: true, opacity: 0.5 });
            const particles = new THREE.Points(geometry, material);
            scene.add(particles);
            camera.position.z = 5;

            function animate() {
                requestAnimationFrame(animate);
                particles.rotation.y += 0.0003;
                particles.position.y += Math.sin(Date.now()*0.001)*0.001;
                renderer.render(scene, camera);
            }
            animate();
            
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth/window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
    </script>
</body>
</html>
